/*
 * generated by Xtext 2.20.0
 */
package kcl.mdd.cw.sql.validation;

import org.eclipse.xtext.validation.Check;

import kcl.mdd.cw.sql.simpleSQL.INSERT;
import kcl.mdd.cw.sql.simpleSQL.SimpleSQLPackage;
import kcl.mdd.cw.sql.simpleSQL.Statement;

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
public class SimpleSQLValidator extends AbstractSimpleSQLValidator {
	
//	public static final INVALID_NAME = 'invalidName'
//
//	@Check
//	public void checkGreetingStartsWithCapital(Greeting greeting) {
//		if (!Character.isUpperCase(greeting.getName().charAt(0))) {
//			warning("Name should start with a capital",
//					SimpleSQLPackage.Literals.GREETING__NAME,
//					INVALID_NAME);
//		}
//	}
/*    public class DomainmodelValidator extends AbstractDomainmodelValidator {
        
        @Check
        public void checkNameStartsWithCapital(Entity entity) {
            if (!Character.isUpperCase(entity.getName().charAt(0))) {
                warning("Name should start with a capital", 
                    DomainmodelPackage.Literals.TYPE__NAME);
            }
        }
    }*/
	
	@Check
	public void checkInsertTableNameLowercase(INSERT stmt)
	{
		if (!isStringLowercase(stmt.getTable().getName()))
		{
			warning("Table names should be lowercase", SimpleSQLPackage.Literals.INSERT__TABLE);
		}
	}
	
	@Check
	public void checkCreateTableNameLowercase(CREATE_TABLE cTbl)
	{
		
	}
	
	private boolean isStringLowercase(String s)
	{
        //convert String to char array
        char[] charArray = s.toCharArray();
        
        for(int i=0; i < charArray.length; i++){
            
            //if the character is a letter
            if( Character.isLetter(charArray[i]) ){
 
                //if any character is not in lower case, return false
                if( !Character.isLowerCase( charArray[i] ))
                    return false;
            }
        }
        
        return true;
	}
}
